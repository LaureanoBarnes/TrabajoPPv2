<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Listar Aulas</title>
    <style>
        :root {
            --background: 0 0% 100%;
            --foreground: 240 10% 3.9%;
            --card: 0 0% 100%;
            --card-foreground: 240 10% 3.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 240 10% 3.9%;
            --primary: 240 5.9% 10%;
            --primary-foreground: 0 0% 98%;
            --secondary: 240 4.8% 95.9%;
            --secondary-foreground: 240 5.9% 10%;
            --muted: 240 4.8% 95.9%;
            --muted-foreground: 240 3.8% 45%;
            --accent: 240 4.8% 95.9%;
            --accent-foreground: 240 5.9% 10%;
            --destructive: 0 72% 51%;
            --destructive-foreground: 0 0% 98%;
            --border: 240 5.9% 90%;
            --input: 240 5.9% 90%;
            --ring: 240 5.9% 10%;
            --chart-1: 173 58% 39%;
            --chart-2: 12 76% 61%;
            --chart-3: 197 37% 24%;
            --chart-4: 43 74% 66%;
            --chart-5: 27 87% 67%;
            --radius: 0.5rem;
        }
        h1, h2, h3, h4, h5, h6, body {
            font-family: 'Inter', sans-serif;
        }
        body {
            background-image: url('http://getwallpapers.com/wallpaper/full/a/5/d/544750.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            backdrop-filter: blur(5px);
            color: var(--foreground);
        }
        header, aside, table {
            background: rgba(0, 0, 0, 0.5);
            border-radius: var(--radius);
            color: #ffeb3b;
        }
        header {
            padding: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        aside {
            padding: 20px;
            width: 250px;
            position: absolute;
            top: 88px;
            left: 0px;
            bottom: 10px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        a {
            color: var(--foreground);
        }
        button {
            background-color: #ffeb3b;
            border: none;
            padding: 10px;
            border-radius: var(--radius);
            cursor: pointer;
            color: #000;
            margin-bottom: 20px;
        }
        .dropdown {
            position: relative;
            display: inline-block;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: var(--radius);
            z-index: 1;
        }
        .dropdown-content a {
            color: var(--foreground);
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        .dropdown-content a:hover {
            background-color: rgba(0, 0, 0, 0.9);
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        container {
            display: flex;
            min-height: 100vh; /* Hace que el contenedor principal ocupe toda la altura de la pantalla */
            margin: 0;
            padding: 0;
        }

        sidebar {
            width: 250px; /* Ajusta el ancho según tu diseño */
            background-color: rgba(0, 0, 0, 0.7); /* Fondo semi-transparente */
            color: yellow;
            padding: 20px;
            box-sizing: border-box; /* Asegura que el padding no afecte el ancho total */
            margin: 0; /* Elimina cualquier margen sobrante */
            border-right: none; /* Elimina cualquier borde a la derecha si existiera */
            position: fixed; /* Fija la barra en el borde izquierdo */
            top: 0;
            bottom: 0;
            left: 0;
        }

        content {
            flex-grow: 1; /* Hace que el contenido principal ocupe el espacio restante */
            padding: 20px;
            background: url('http://getwallpapers.com/wallpaper/full/a/5/d/544750.jpg') no-repeat center center;
            background-size: cover;
            margin-left: 250px; /* Deja espacio para la barra lateral */

        }
        .info{
            padding: 70px;
            max-width: 800px;
            margin-top: 20px;
            margin-left: 300px;
            text-align: center;

            background: rgba(0, 0, 0, 0.7);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: flex;
        }
        h1{
            color: #ffeb3b;
            font-family: 'Passion One', cursive;

        }
        h2{
            color: #ffeb3b;
            font-size: larger;
            text-align: left;
        }
    </style>
</head>
<body>
<header>
    <button>
    <div>
        <!-- Cambié el botón por un enlace -->
        <a href="/" title="home">
            <img src="/iconohome.svg">
        </a>
    </div>
    </button>
    <div class="dropdown">
        <span th:text="${nombreCompleto}"></span>
        <button>
            <img src="/iconoPerfil.svg">
        </button>

        <div class="dropdown-content">
            <a sec:href="@{/perfil}">Perfil</a>
            <a href="/logout" onclick="this.parentNode.submit();">desconectarse</a>
        </div>
    </div>
</header>
<aside>
    <h2>Aulas disponibles</h2>
    <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/crear}"><button type="button">Crear Aula</button></a>
    <div th:if="${aulas.size() == 0}">
        <p>No hay aulas disponibles.</p>
    </div>
    <div th:if="${aulas.size() > 0}">
        <ul>
            <li th:each="aula : ${aulas}">
                <span th:text="${aula.nombreAula}">Nombre del Aula</span> -
                <span th:text="${aula.cursoAula}">Curso del Aula</span>
                <!-- Opción de entrar -->
                <a th:if="${#lists.contains(aula.usuarios, currentUser) or #lists.contains(aula.administradores, currentUser)}"
                   th:href="@{/aula/{id_aula}(id_aula=${aula.id_aula})}">- Entrar</a>
                <div style="display: inline;">
                    <!-- Controlar la visibilidad del icono de engranaje y el menú desplegable -->
                    <div th:if="${#lists.contains(aula.administradores, currentUser)}"
                         class="dropdown">
                        <img src="/engranaje.svg" alt="Configurar" width="15" height="15">
                        <div class="dropdown-content">
                            <a th:if="${#lists.contains(aula.usuarios, currentUser) or #lists.contains(aula.administradores, currentUser)}"
                               sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/editar/{id_aula}(id_aula=${aula.id_aula})}">Editar</a>
                            <a th:if="${#lists.contains(aula.usuarios, currentUser) or #lists.contains(aula.administradores, currentUser)}"
                               sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/eliminar/{id}(id=${aula.id_aula})}">Eliminar</a>
                        </div>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</aside>
<!--<h1>Lista de Aulas</h1>-->
<!--<table>-->
<!--    <tbody>-->
<!--    </tbody>-->
<!--</table>-->
<!--<footer th:replace="~{plantilla/plantilla :: piepagina}"></footer>-->
<div class="info">
    <a>
        <h1>Información de la ultima actualización: </h1>
        <h2>
            Se ha agregado nuevas interfaces, iconos y modificado permisos especiales como:
            <br>
            * Accesos denegados a usuarios que no estan dentro de una aula
            <br>
            * Permisos de subir archivos
            <br>
            * Ahora solamente el admin correspondiente puede editar el aula creado


        </h2>
    </a>



</div>
</body>
</html>
